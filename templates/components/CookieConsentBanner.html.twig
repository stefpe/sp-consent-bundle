<div {{ attributes }}>
    {% if showBanner %}
        {% block banner_wrapper %}
        <div class="cookie-consent-banner" 
             style="position: fixed; bottom: 0; left: 0; right: 0; background: #fff; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); padding: 20px; z-index: 9999; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
            
            {% if not showAdvanced %}
                {% block simple_banner %}
                <div class="cookie-consent-simple">
                    <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 300px;">
                            {% block simple_banner_content %}
                                {% block simple_banner_title %}
                                <h3 style="margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">üç™ Cookie-Einstellungen</h3>
                                {% endblock %}
                                
                                {% block simple_banner_message %}
                                <p style="margin: 0; color: #666; font-size: 14px; line-height: 1.5;">
                                    Wir verwenden Cookies, um Ihre Erfahrung zu verbessern. Bitte w√§hlen Sie Ihre Cookie-Pr√§ferenzen.
                                </p>
                                {% endblock %}
                            {% endblock %}
                        </div>
                        
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            {% block simple_banner_buttons %}
                                {% block button_accept_all %}
                                <button 
                                    data-action="live#action"
                                    data-live-action-param="acceptAll"
                                    style="padding: 12px 24px; background: #0d6efd; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: background 0.2s;"
                                    onmouseover="this.style.background='#0b5ed7'"
                                    onmouseout="this.style.background='#0d6efd'"
                                >
                                    Alle akzeptieren
                                </button>
                                {% endblock %}
                                
                                {% block button_reject_optional %}
                                <button 
                                    data-action="live#action"
                                    data-live-action-param="rejectOptional"
                                    style="padding: 12px 24px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: background 0.2s;"
                                    onmouseover="this.style.background='#5a6268'"
                                    onmouseout="this.style.background='#6c757d'"
                                >
                                    Nur notwendige
                                </button>
                                {% endblock %}
                                
                                {% block button_customize %}
                                <button 
                                    data-action="live#action"
                                    data-live-action-param="showAdvancedSettings"
                                    style="padding: 12px 24px; background: transparent; color: #0d6efd; border: 2px solid #0d6efd; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s;"
                                    onmouseover="this.style.background='#0d6efd'; this.style.color='white'"
                                    onmouseout="this.style.background='transparent'; this.style.color='#0d6efd'"
                                >
                                    Einstellungen anpassen
                                </button>
                                {% endblock %}
                            {% endblock %}
                        </div>
                    </div>
                </div>
                {% endblock %}
            {% else %}
                {% block advanced_settings %}
                <div class="cookie-consent-advanced">
                    <div style="max-width: 800px; margin: 0 auto;">
                        {% block advanced_header %}
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            {% block advanced_title %}
                            <h3 style="margin: 0; font-size: 20px; font-weight: 600;">Cookie-Einstellungen anpassen</h3>
                            {% endblock %}
                            
                            {% block advanced_close_button %}
                            <button 
                                data-action="live#action"
                                data-live-action-param="hideAdvancedSettings"
                                style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; color: #666;"
                                title="Zur√ºck"
                            >
                                √ó
                            </button>
                            {% endblock %}
                        </div>
                        {% endblock %}

                        {% block categories_list %}
                        <div style="max-height: 400px; overflow-y: auto; margin-bottom: 20px;">
                            {% for key, category in this.getCookieCategories() %}
                                {% block category_item %}
                                <div style="border: 1px solid #dee2e6; border-radius: 8px; padding: 16px; margin-bottom: 12px; background: #f8f9fa;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px;">
                                        <div style="flex: 1;">
                                            {% block category_header %}
                                            <h4 style="margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">
                                                {{ category.name }}
                                                {% if category.required %}
                                                    <span style="font-size: 12px; color: #dc3545; font-weight: normal;">(Erforderlich)</span>
                                                {% endif %}
                                            </h4>
                                            {% endblock %}
                                            
                                            {% block category_description %}
                                            <p style="margin: 0; font-size: 14px; color: #666; line-height: 1.5;">
                                                {{ category.description }}
                                            </p>
                                            {% endblock %}
                                        </div>
                                        
                                        {% block category_toggle %}
                                        <div>
                                            <label style="position: relative; display: inline-block; width: 50px; height: 26px;">
                                                <input 
                                                    type="checkbox" 
                                                    data-model="preferences.{{ key }}"
                                                    {% if category.required %}checked disabled{% endif %}
                                                    style="opacity: 0; width: 0; height: 0;"
                                                />
                                                <span style="position: absolute; cursor: {% if category.required %}not-allowed{% else %}pointer{% endif %}; top: 0; left: 0; right: 0; bottom: 0; background-color: {% if category.required or preferences[key] %}#0d6efd{% else %}#ccc{% endif %}; transition: 0.3s; border-radius: 26px;">
                                                    <span style="position: absolute; content: ''; height: 20px; width: 20px; left: {% if category.required or preferences[key] %}26px{% else %}3px{% endif %}; bottom: 3px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                                                </span>
                                            </label>
                                        </div>
                                        {% endblock %}
                                    </div>
                                </div>
                                {% endblock %}
                            {% endfor %}
                        </div>
                        {% endblock %}

                        {% block advanced_footer %}
                        <div style="display: flex; gap: 10px; justify-content: flex-end; border-top: 1px solid #dee2e6; padding-top: 16px;">
                            {% block advanced_buttons %}
                                {% block button_save_preferences %}
                                <button 
                                    data-action="live#action"
                                    data-live-action-param="savePreferences"
                                    style="padding: 12px 32px; background: #0d6efd; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: background 0.2s;"
                                    onmouseover="this.style.background='#0b5ed7'"
                                    onmouseout="this.style.background='#0d6efd'"
                                >
                                    Einstellungen speichern
                                </button>
                                {% endblock %}
                                
                                {% block button_accept_all_advanced %}
                                <button 
                                    data-action="live#action"
                                    data-live-action-param="acceptAll"
                                    style="padding: 12px 24px; background: #198754; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: background 0.2s;"
                                    onmouseover="this.style.background='#157347'"
                                    onmouseout="this.style.background='#198754'"
                                >
                                    Alle akzeptieren
                                </button>
                                {% endblock %}
                            {% endblock %}
                        </div>
                        {% endblock %}
                    </div>
                </div>
                {% endblock %}
            {% endif %}
        </div>
        {% endblock %}
    {% endif %}

    {# Settings Button (always visible when consent is given) #}
    {% if this.hasConsent() and not showBanner %}
        {% block settings_button %}
        <button 
            data-action="live#action"
            data-live-action-param="reopenSettings"
            style="position: fixed; bottom: 20px; left: 20px; background: #0d6efd; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.2); font-size: 24px; z-index: 9998; transition: transform 0.2s;"
            title="Cookie-Einstellungen"
            onmouseover="this.style.transform='scale(1.1)'"
            onmouseout="this.style.transform='scale(1)'"
        >
            {% block settings_button_icon %}üç™{% endblock %}
        </button>
        {% endblock %}
    {% endif %}
</div>

