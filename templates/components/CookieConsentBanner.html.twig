<div {{ attributes }}>
    {% if this.showBanner %}
        {% block banner_wrapper %}
        <div {{ attributes.nested('banner').defaults({class: 'cookie-consent-banner'}) }}>
            
            {% if not this.showAdvanced %}
                {% block simple_banner %}
                <div {{ attributes.nested('simple_banner').defaults({class: 'cookie-consent-simple'}) }}>
                    <div {{ attributes.nested('simple_banner:container') }}>
                        <div {{ attributes.nested('simple_banner:content') }}>
                            {% block simple_banner_content %}
                                {% block simple_banner_title %}
                                <h3 {{ attributes.nested('title') }}>üç™ Cookie-Einstellungen</h3>
                                {% endblock %}
                                
                                {% block simple_banner_message %}
                                <p {{ attributes.nested('message') }}>
                                    Wir verwenden Cookies, um Ihre Erfahrung zu verbessern. Bitte w√§hlen Sie Ihre Cookie-Pr√§ferenzen.
                                </p>
                                {% endblock %}
                            {% endblock %}
                        </div>
                        
                        <div {{ attributes.nested('simple_banner:buttons_container') }}>
                            {% block simple_banner_buttons %}
                                {% block button_accept_all %}
                                <button {{ attributes.nested('button:accept_all').defaults({
                                    'data-action': 'live#action',
                                    'data-live-action-param': 'acceptAll'
                                }) }}>
                                    Alle akzeptieren
                                </button>
                                {% endblock %}
                                
                                {% block button_reject_optional %}
                                <button {{ attributes.nested('button:reject_optional').defaults({
                                    'data-action': 'live#action',
                                    'data-live-action-param': 'rejectOptional'
                                }) }}>
                                    Nur notwendige
                                </button>
                                {% endblock %}
                                
                                {% block button_customize %}
                                <button {{ attributes.nested('button:customize').defaults({
                                    'data-action': 'live#action',
                                    'data-live-action-param': 'showAdvancedSettings'
                                }) }}>
                                    Einstellungen anpassen
                                </button>
                                {% endblock %}
                            {% endblock %}
                        </div>
                    </div>
                </div>
                {% endblock %}
            {% else %}
                {% block advanced_settings %}
                <div {{ attributes.nested('advanced_settings').defaults({class: 'cookie-consent-advanced'}) }}>
                    <div {{ attributes.nested('advanced_settings:container') }}>
                        {% block advanced_header %}
                        <div {{ attributes.nested('advanced_header') }}>
                            {% block advanced_title %}
                            <h3 {{ attributes.nested('advanced_title') }}>Cookie-Einstellungen anpassen</h3>
                            {% endblock %}
                            
                            {% block advanced_close_button %}
                            <button {{ attributes.nested('advanced_close_button').defaults({
                                'data-action': 'live#action',
                                'data-live-action-param': 'hideAdvancedSettings',
                                'title': 'Zur√ºck'
                            }) }}>
                                √ó
                            </button>
                            {% endblock %}
                        </div>
                        {% endblock %}

                        {% block categories_list %}
                        <div {{ attributes.nested('categories_list') }}>
                            {% for key, category in this.getCookieCategories() %}
                                {% block category_item %}
                                <div {{ attributes.nested('category_item') }}>
                                    <div {{ attributes.nested('category_item:content') }}>
                                        <div {{ attributes.nested('category_item:info') }}>
                                            {% block category_header %}
                                            <h4 {{ attributes.nested('category_header') }}>
                                                {{ category.name }}
                                                {% if category.required %}
                                                    <span {{ attributes.nested('category_required_badge') }}>(Erforderlich)</span>
                                                {% endif %}
                                            </h4>
                                            {% endblock %}
                                            
                                            {% block category_description %}
                                            <p {{ attributes.nested('category_description') }}>
                                                {{ category.description }}
                                            </p>
                                            {% endblock %}
                                        </div>
                                        
                                        {% block category_toggle %}
                                        <div>
                                            <label {{ attributes.nested('category_toggle:label') }}>
                                                <input
                                                    type="checkbox"
                                                    data-model="preferences.{{ key }}"
                                                    {% if category.required %}checked disabled{% endif %}
                                                    class="peer"
                                                />
                                                <span></span>
                                            </label>
                                        </div>
                                        {% endblock %}
                                    </div>
                                </div>
                                {% endblock %}
                            {% endfor %}
                        </div>
                        {% endblock %}

                        {% block advanced_footer %}
                        <div {{ attributes.nested('advanced_footer') }}>
                            {% block advanced_buttons %}
                                {% block button_save_preferences %}
                                <button {{ attributes.nested('button:save_preferences').defaults({
                                    'data-action': 'live#action',
                                    'data-live-action-param': 'savePreferences'
                                }) }}>
                                    Einstellungen speichern
                                </button>
                                {% endblock %}
                                
                                {% block button_accept_all_advanced %}
                                <button {{ attributes.nested('button:accept_all_advanced').defaults({
                                    'data-action': 'live#action',
                                    'data-live-action-param': 'acceptAll'
                                }) }}>
                                    Alle akzeptieren
                                </button>
                                {% endblock %}
                            {% endblock %}
                        </div>
                        {% endblock %}
                    </div>
                </div>
                {% endblock %}
            {% endif %}
        </div>
        {% endblock %}
    {% endif %}
</div>
